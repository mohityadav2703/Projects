package in.mk.inventory.controller;

import org.springframework.web.bind.annotation.*;

import in.mk.inventory.dto.InventoryRequest;
import in.mk.inventory.dto.InventoryResponse;
import in.mk.inventory.service.InventoryService;
import lombok.RequiredArgsConstructor;

@RestController
@RequestMapping("/inventory")
@RequiredArgsConstructor
public class InventoryController {

    private final InventoryService inventoryService;

    @PostMapping("/add")
    public void addStock(@RequestBody InventoryRequest request) {
        inventoryService.addOrUpdateStock(request);
    }

    @GetMapping("/check/{productId}")
    public InventoryResponse check(@PathVariable Long productId) {
        return inventoryService.checkStock(productId);
    }

    @PostMapping("/reserve")
    public void reserve(@RequestParam Long productId,
                        @RequestParam int qty) {
        inventoryService.reserveStock(productId, qty);
    }

    @PostMapping("/release")
    public void release(@RequestParam Long productId,
                        @RequestParam int qty) {
        inventoryService.releaseStock(productId, qty);
    }
}
