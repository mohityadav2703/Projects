package in.mk.inventory.controller;

import org.springframework.web.bind.annotation.*;

import in.mk.inventory.dto.InventoryRequest;
import in.mk.inventory.dto.InventoryResponse;
import in.mk.inventory.service.InventoryService;
import lombok.RequiredArgsConstructor;

@RestController
@RequestMapping("/inventory")
@RequiredArgsConstructor
public class InventoryController {

	private final InventoryService inventoryService;

	@PostMapping("/add")
	public void addStock(@RequestBody InventoryRequest request) {
		inventoryService.addOrUpdateStock(request);
	}

	@GetMapping("/{id}")
	public InventoryResponse check(@PathVariable("id") Long productId) {
		return inventoryService.checkStock(productId);
	}

	@PostMapping("/reserve")
	public void reserve(@RequestParam("productId") Long productId, @RequestParam("qty") int qty) {
		inventoryService.reserveStock(productId, qty);
	}

	@PostMapping("/release")
	public void release(@RequestParam("productId") Long productId, @RequestParam("qty") int qty) {
		inventoryService.releaseStock(productId, qty);
	}
}
